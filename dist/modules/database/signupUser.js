"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.default=({configs,bcrypt},client)=>async data=>{const db=await client;const col=await db.collection(configs.database.mongo.collections.users);const availableData=await col.findOne({$or:[{name:data.name},{email:data.email}]},{name:!0,email:!0});if(availableData){if(availableData.name===data.name){throw configs.response.alreadyTakenName}if(availableData.email===data.email){throw configs.response.alreadyTakenEmail}}const salt=await bcrypt.genSalt(10);const user={new:!0,name:data.name,email:data.email,password:await bcrypt.hash(data.password,salt)};const isSuccess=await col.insertOne(user);if(!isSuccess){throw configs.response.signupUser}return!0};