"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _apiHeader=require("./apiHeader");var _apiHeader2=_interopRequireDefault(_apiHeader);var _debugLogger=require("./debugLogger");var _debugLogger2=_interopRequireDefault(_debugLogger);var _signature=require("./signature");var _signature2=_interopRequireDefault(_signature);var _parserErrorCatcher=require("./parserErrorCatcher");var _parserErrorCatcher2=_interopRequireDefault(_parserErrorCatcher);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=({configs,logger,bcrypt,helmet,bodyParser,morgan,path,express},router)=>{router.use((0,_apiHeader2.default)());router.use(helmet());router.use(helmet.hpkp({maxAge:7776000,sha256s:["AbCdEf123=","ZyXwVu456="]}));router.use(helmet.contentSecurityPolicy({directives:{defaultSrc:["'self'"],styleSrc:["'self'"]}}));router.use(helmet.noCache());router.use((0,_signature2.default)({bcrypt,configs}));router.use(bodyParser.urlencoded({extended:!0,defer:!0}));router.use(bodyParser.json({type:"*/*"}));router.use((0,_parserErrorCatcher2.default)({configs}));router.use(morgan("combined",{stream:{write:message=>logger.info(message)}}));router.use((0,_debugLogger2.default)({logger}));router.use("/",express.static(path.resolve(process.cwd(),"public")));return router};